"use strict";angular.module("swd.inspector-gadget",[]),angular.module("swd.inspector-gadget").service("intPopover",function(){this.bootstrap=function(a,b){return a.popover(b),{show:function(){a.popover("show")},hide:function(){a.popover("hide")}}}}),angular.module("swd.inspector-gadget").directive("inspectorGadget",["$compile","$document","intPopover","$timeout",function(a,b,c,d){var e=b[0],f=function(a){return angular.element(a.parentsUntil().slice(-1)[0])},g=function(a,b){if(b){var c=e.createElement("div");c.setAttribute("data-inspector-gadget-tag",b),c.setAttribute("style","display: none"),a.appendChild(c)}var d=a.innerHTML;return d},h=function(a){var b={};return angular.forEach(a,function(a,c){("placement"===c||"animation"===c||"delay"===c||"container"===c||"viewport"===c)&&(b[c]=a)}),b},i=function(a,b){var c=a.find('div[data-inspector-gadget-tag="'+b+'"]'),d=c.parent().parent();return d},j=1,k=function(b,e,g){var j=e.find(".popover-anchor"),k=f(j),l=b._insp.popoverId,m=b._insp.titleHtml,n=b._insp.contentHtml,o=h(g),p=500;g.hasOwnProperty("timeout")&&(p=parseInt(g.timeout,10));var q=null,r=null;o.html=!0,o.title=function(){return m},o.content=function(){return n},o.trigger="manual";var s,t=function(a,b){return i(a,b).length>0},u=function(){q.hide()};j.mouseenter(function(){if(d.cancel(r),!t(k,l)){s=!1,q.show();var c=i(k,l);c.mouseenter(function(){d.cancel(r)}),c.mouseleave(function(){d.cancel(r),r=d(function(){u()},p)}),a(c.contents())(b),b.$apply()}}),j.on("shown.bs.popover",function(){s=!0}),j.mouseleave(function(){d.cancel(r),r=d(function(){u()},p)}),q=c.bootstrap(j,o)};return{restrict:"E",transclude:!0,compile:function(a,b,c){return function(a,d){var e=a.$new();c(e,function(a,b){b._insp={};var c=angular.element('<div class="popover-anchor"></div>');angular.forEach(a,function(a){if(1!==a.nodeType||"INSPECTOR-TITLE"!==a.tagName&&"INSPECTOR-CONTENT"!==a.tagName)c.append(a);else if(1===a.nodeType&&"INSPECTOR-CONTENT"===a.tagName)b._insp.contentHtml=a.innerHTML;else if(1===a.nodeType&&"INSPECTOR-TITLE"===a.tagName){var d=j++;b._insp.popoverId=d,b._insp.titleHtml=g(a,d)}}),d.append(c)}),k(e,angular.element(d[0]),b)}}}}]),angular.module("swd.inspector-gadget").directive("inspectorContent",function(){return{require:"^inspectorGadget",restrict:"E",terminal:!0,priority:1e3}}),angular.module("swd.inspector-gadget").directive("inspectorTitle",function(){return{require:"^inspectorGadget",restrict:"E",terminal:!0,priority:1e3}});